(this["webpackJsonpyoda-admin-react"]=this["webpackJsonpyoda-admin-react"]||[]).push([[87],{521:function(a,e,t){},572:function(a,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return g}));var n=t(1),r=t(35),c=t(63),s=t(7),i=t(29),o=(t(108),t(114)),l=t(30),u=t(522),d=t(380),m=t(223),b=t(564),j=t(381),p=t(88),f=(t(521),t(64)),O=t(2);var h=Object(i.b)((function(a){return{adminUsername:a.adminUsername,adminName:a.adminName,adminEmail:a.adminEmail}}),(function(a){return{login:function(e){a({type:l.b,payload:e.adminName}),a({type:l.c,payload:e.adminUser}),a({type:l.a,payload:e.adminMail})}}}))((function(a){var e=Object(n.useState)(""),t=Object(s.a)(e,2),i=t[0],l=t[1],h=Object(n.useState)(""),k=Object(s.a)(h,2),g=k[0],x=k[1],v=Object(n.useState)(!1),w=Object(s.a)(v,2),y=w[0],N=w[1],S=Object(f.b)().fetchApi;Object(n.useEffect)((function(){localStorage.getItem("token")&&(window.location.href="/")}),[y]);var C=function(){var e=Object(c.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!g){e.next=3;break}return e.next=3,o.a.post("login",{username:i,password:g}).then(function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==t.data.data.data.status){e.next=3;break}return m.b.error("Akun tidak aktif, silahkan hubungi admin!"),e.abrupt("return");case 3:return localStorage.setItem("token","".concat(t.data.data.token_type," ").concat(t.data.data.access_token)),localStorage.setItem("id",t.data.data.data.id),a.login({adminName:t.data.data.name,adminUsername:t.data.data.username,adminMail:t.data.data.email}),N(!0),e.next=9,S();case 9:m.b.info("Selamat Datang!");case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()).catch((function(a){m.b.error("Gagal Login! Silakan periksa username dan password Anda!")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(b.a,{name:"basic",layout:"vertical",labelCol:{span:8},wrapperCol:{span:24},initialValues:{remember:!0},autoComplete:"off",children:[Object(O.jsx)(b.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Mohon masukkan username!"}],children:Object(O.jsx)(j.a,{prefix:Object(O.jsx)(u.a,{}),placeholder:"Masukkan Username",value:i,onChange:function(a){return l(a.target.value)}})}),Object(O.jsx)(b.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Mohon masukkan password!"}],children:Object(O.jsx)(j.a.Password,{prefix:Object(O.jsx)(d.a,{}),placeholder:"Masukkan Password",className:"ant-col",value:g,onChange:function(a){return x(a.target.value)}})}),Object(O.jsx)(b.a.Item,{wrapperCol:{span:24},children:Object(O.jsx)(p.a,{type:"primary",onClick:C,danger:!0,htmlType:"submit",block:!0,children:"Login"})})]})})})),k=t(107);function g(){return Object(O.jsxs)("div",{className:"custom-login-container",children:[Object(O.jsx)("div",{className:"logo",children:Object(O.jsx)("img",{src:k.a,alt:"logo"})}),Object(O.jsx)("div",{className:"login-container",children:Object(O.jsx)("div",{className:"form-container",children:Object(O.jsx)(h,{})})})]})}}}]);
//# sourceMappingURL=87.9f3ef975.chunk.js.map